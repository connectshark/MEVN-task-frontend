import{h as p,i as x,u as E,c as T,j as N,k as S,o as c,d,e as o,t as u,F as U,l as A,m as v,n as k,p as _}from"./index.30597a5a.js";import{g as O,d as V}from"./taskApi.47d380d6.js";var b;const D=typeof window!="undefined";D&&((b=window==null?void 0:window.navigator)==null?void 0:b.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function I(e){return typeof e=="function"?e():p(e)}function m(e){this.message=e}m.prototype=new Error,m.prototype.name="InvalidCharacterError";var C=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new m("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,t,s=0,a=0,i="";t=n.charAt(a++);~t&&(r=s%4?64*r+t:t,s++%4)?i+=String.fromCharCode(255&r>>(-2*s&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return i};function j(e){var n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(C(r).replace(/(.)/g,function(t,s){var a=s.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}(n)}catch{return C(n)}}function w(e){this.message=e}function B(e,n){if(typeof e!="string")throw new w("Invalid token specified");var r=(n=n||{}).header===!0?0:1;try{return JSON.parse(j(e.split(".")[r]))}catch(t){throw new w("Invalid token specified: "+t.message)}}w.prototype=new Error,w.prototype.name="InvalidTokenError";function F(e,n={}){const{onError:r,fallbackValue:t=null}=n,s=(l,g)=>{try{return B(l,g)}catch(h){return r==null||r(h),t}},a=x(()=>s(I(e),{header:!0})),i=x(()=>s(I(e)));return{header:a,payload:i}}const R={class:""},q={class:"bg-amber-900 text-white"},M={class:"flex justify-between max-w-md mx-auto"},W=o("span",null,"USERNAME:",-1),J={class:"flex justify-between max-w-md mx-auto"},L=o("span",null,"ID:",-1),P={key:0},$={class:"max-w-md mx-auto bg-fuchsia-200 mb-4 p-4 rounded-xl"},z={class:"text-xs"},G=["onClick"],H={key:1},K=o("li",{class:"max-w-md mx-auto p-4 rounded-xl"},"\u7121\u4EFB\u52D9\u72C0\u614B",-1),Q=[K],X={class:"max-w-md mx-auto p-4 rounded-xl"},te={__name:"UserView",setup(e){const n=E(),{header:r,payload:t}=F(n.token),s=T([]),a=async()=>{const l=await O({ownerId:t.value.userInfo.id});s.value=l};N(a);const i=async l=>{await V(l),a()};return(l,g)=>{var y;const h=S("router-link");return c(),d("main",R,[o("div",q,[o("p",M,[W,o("span",null,u(p(t).userInfo.username),1)]),o("p",J,[L,o("span",null,u(p(t).userInfo.id),1)])]),((y=s.value)==null?void 0:y.length)>0?(c(),d("ul",P,[(c(!0),d(U,null,A(s.value,f=>(c(),d("li",$,[o("p",null,"OWNER: "+u(p(t).userInfo.username),1),o("p",null,[_("ID: "),o("span",z,u(f._id),1)]),o("p",null,"CONTENT: "+u(f.content),1),o("p",null,[v(h,{to:{path:"/task/update",query:{taskId:f._id,redirect:"/user"}},class:"mr-4 bg-amber-500 text-white inline-block py-3 px-5 rounded-lg hover:opacity-80 transition-colors"},{default:k(()=>[_("\u66F4\u65B0\u4EFB\u52D9 ")]),_:2},1032,["to"]),o("button",{onClick:Y=>i(f._id),class:"bg-slate-500 text-white inline-block py-3 px-5 rounded-lg hover:opacity-80 transition-colors"},"\u522A\u9664\u4EFB\u52D9 ",8,G)])]))),256))])):(c(),d("ul",H,Q)),o("div",X,[v(h,{to:{path:"/task/new",query:{owner:p(t).userInfo.id,redirect:"/user"}},class:"bg-sky-800 text-white inline-block py-3 px-5 rounded-lg hover:opacity-80 transition-colors"},{default:k(()=>[_("\u65B0\u589E\u4EFB\u52D9 ")]),_:1},8,["to"])])])}}};export{te as default};
